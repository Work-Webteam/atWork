<?php
use Drupal\atwork_idir_update\Controller\AtworkIdirUpdateController;
use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_cron()
 */
function atwork_idir_update_cron()
{ 
  //kint("Hook got picked up");
    // We access our configuration.
  //$cron_config = \Drupal::configFactory()->getEditable('atwork_idir_update.settings');
  // Instantiate a new singleton class controller to fire up our idir update.
  $atwork_idir_update = new AtworkIdirUpdateController;
  $atwork_idir_update->main();
  // Hooking into cron every morning at 6am
}

function atwork_idir_update_cronapi($op, $job=null)
{
  return array(
    'atwork_idir_update_cronjob__1' => array(
      'title' => 'Idir-1 Handler',
      'callback' => 'atwork_idir_update_cron_test',
      'scheduler' => array(
        'name' => 'crontab',
        'crontab' => array(
          'rules' => array('15 6 * * *')
        ),
      ),
    ),
  );
}


function atwork_idir_update_cron_test()
{

}